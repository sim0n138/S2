# UX и AI-бенчмарк пошагового PvP-прототипа

## 1. Эталонные проекты и ключевые паттерны

| Игра | UX-паттерны | AI-паттерны |
| --- | --- | --- |
| Hearthstone | **Структурированные карточки**: стоимость маны фиксирована в левом верхнем углу; **ключевые слова** выделяются цветом и всплывающими подсказками; **журнал событий** с фильтрацией по типу действия. | **Простые эвристики**: фокус на летал-комбо, проверка «выигрываю-ли я ходом»; расход ресурсов по принципу curve-оптимизации; избегание повторного наложения эффектов контроля, если цель уже под ним. |
| Legends of Runeterra | **Динамические подсказки**: всплывающие окна показывают все слои эффекта, связанные карты и статусы; **индикаторы возможностей** (например, «Spell Mana») подсвечивают доступные действия; **иконки статусов** рядом с юнитом. | **Реактивный AI** (в обучении/ПВЕ): откладывает ключевые заклинания до наступления «окна»; сохраняет контроль для приоритетных угроз; оптимизирует использование маны за счёт переноса Spell Mana. |
| Marvel Snap | **Ультракороткие описания**: текст способностей на одной строке, поддержка разворачиваемых подсказок; **сигналы доступности** через подсветку энергии и вибрации карты; **анимации результата** акцентируют исход хода. | **Вероятностное принятие решений**: симулирует несколько исходов ходов, склонен к сохранению ресурса при высоком риске; использует информацию о скрытых эффектах для блефа. |

## 2. Сравнительная таблица UI-отображения способностей

| Параметр | Прототип (renderAbilities) | Hearthstone | Legends of Runeterra |
| --- | --- | --- | --- |
| Стоимость | Текст «X маны» в блоке `.ability-meta`; численное значение обновляется из объекта способности. | Цифра в левом верхнем углу карты, цвет изменяется при нехватке маны. | Цифра в левом левом углу, цвет и пульсация при доступности. |
| Кулдаун | Статический текст «КД: N» + отдельный счётчик overlay при перезарядке (`.ability-cooldown`). | Отсутствует (стоимость — единственный лимитер). | Фазы раундов и «тонус» способности, карта возвращается в руку с индикатором времени. |
| Эффекты | Список `<li>` генерируется `getAbilityTooltipLines`, включает урон/щит/контроль. | Ключевые слова с «галереей» подсказок, раскрываются по клику. | Ключевые слова и связанные карточки, подсказки с иконками. |
| Описание | `<p class="tooltip-description">` с базовой строкой. | На карте в центре, разбито на ключевые слова. | В подсказке, может иметь несколько абзацев и ссылки на механику. |
| Статус доступности | Кнопка дизейблится, добавляются классы `.on-cooldown` и `.insufficient-mana`. | Карта подсвечивается или «дрожит» при возможности розыгрыша. | Карты в руке подсвечиваются зелёным / синим, недоступные затемняются. |

## 3. Игровая сессия и сценарии восприятия

- **Прототип**: последовательность «Огненный шар → Ледяная глыба → ожидание маны». Нехватка маны вызывает серый дизейбл кнопки, синюю обводку (`.insufficient-mana`); при КД отображается overlay с числом ходов. Tooltip остаётся доступным даже в недоступном состоянии, что удобно для чтения. Недоступность по контролю (стан/фриз) полностью отключает кнопки.
- **Hearthstone**: чтение способности осуществляется напрямую с карты, всплывающие подсказки нужны только для ключевых слов. Нехватка маны окрашивает стоимость в красный, появляется «недостаточно маны» при попытке розыгрыша. Визуальная обратная связь — анимация возврата карты в руку.
- **Legends of Runeterra**: при наведении показываются цепочки эффектов, анимация «закрепления» при невозможности атаки. Нехватка маны подсвечивает индикатор Spell Mana; всплывает предупреждение на временной шкале, если игрок пытается разыграть недоступное заклинание.
- **Marvel Snap**: способности читаются в компактной карточке; при попытке хода без энергии карта «дрожит». Визуальная обратная связь — сильные вспышки при активации локационных эффектов.

## 4. Поведение AI: сопоставление с best practices

| Ситуация | Прототип (`enemyTurn`) | Эталонный паттерн | Расхождение |
| --- | --- | --- | --- |
| Добивание низкого HP | Ищет `killingAbility` с уроном ≥ текущему HP цели, используя сортировку по урону. | Приоритет летала, доп. проверка наличия летала через комбинации (Hearthstone). | Нет расчёта комбинированного урона/эффектов, только одиночный каст. |
| Экономия ресурсов | Хранит хил/щит при HP > 40–50%. Мана расходуется, если способность доступна. | Планирование по кривой маны, иногда пропускает ход ради выгодного окна (LoR). | Не анализирует будущие ходы, не учитывает предстоящие угрозы, всегда тратит ману. |
| Контроль/DoT | Проверяет `playerUnderControl` и `playerHasActiveDot`, чтобы не перекрывать эффекты. | Лучшие практики — откладывать контроль для ключевых угроз, обновлять DoT ближе к спаду. | Нет оценки ценности цели (все цели равны), не продлевает контроль заранее. |
| Защита | Использует щит при HP < 50% и отсутствии активного щита. | Использование щитов при угрозе burst урона, иногда заранее. | Не учитывает входящий урон/критические способности игрока. |

## 5. Шкала соответствия и рекомендации

| Критерий | Оценка (1-5) | Комментарий | Рекомендации |
| --- | --- | --- | --- |
| Читаемость способности | 3 | Tooltip предоставляет информацию, но скрыт за hover, нет мгновенной иконографии. | Добавить статические иконки для типов эффектов, предусмотреть мобильный tap-to-toggle. |
| Информирование о недоступности | 4 | Дизейбл + цветовые сигналы работают, но нет текстового фидбека. | Показывать всплывающее сообщение «Недостаточно маны/На перезарядке» в журнале или над кнопкой. |
| Логирование боевых событий | 2 | Лог существует, но не выделяет ключевые события и быстро вытесняет записи. | Категоризировать лог, ввести фильтрацию/цветовое кодирование, фиксировать состояние ресурсов. |
| Приоритет добивания | 3 | Есть поиск letal-способности. | Добавить проверку комбо (например, DoT + прямой урон), считать ожидаемый урон от критов. |
| Экономия ресурсов | 2 | AI не планирует мана-кривую. | Добавить модель «запас маны» и вероятностный выбор «пропустить ход». |
| Повторное наложение контроля/DoT | 4 | Проверки предотвращают дублирование. | Добавить оценку оставшейся длительности, чтобы заранее обновлять эффекты. |
| Реактивность на угрозы | 2 | Нет учёта типа класса игрока или ожидаемых способностей. | Ввести приоритезацию целей/ответов на основе класса и активных баффов.

**Краткие доработки:**
1. Расширить `renderAbilities` статическими иконками эффектов и всплывающими причинами дизейбла.
2. Добавить подсказку/журнал-сообщение при недоступности способности.
3. Улучшить AI: расчёт летала с учётом нескольких способностей, логика сохранения маны и предиктивное использование щитов/контроля.
